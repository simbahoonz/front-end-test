var jsonsites = '{"code":200,"source":{"rows":[{"id":5,"name":"competenz.joybusinessacademy.com"},{"id":2,"name":"nz.joybusinessacademy.com"},{"id":1,"name":"pk.joybusinessacademy.com"},{"id":3,"name":"seasonal.joybusinessacademy.com"},{"id":4,"name":"youthfull.joybusinessacademy.com"}]}}',
    
    jsondatas = [
        '{"code":200,"source":{"data":{"value":["9","0","0","0","4","2","0","2","0","0","4","1","0","0","0","6","8072","14852","1011","265","506","1096","4","1","2","8","0","0","0","0","0","0","0","0","0","0","0","0","0","0","4","3","0","0","1","1","114","0","0","0","169","0","0","0","66","257","0","0","0","0","924","246","0","193","200","398","382","44","42","43","44","43","41","34","49","152","37","56","45","38","135","65","82","97","124","63","283","24","6","23","67","46","42","167","348","109","137","231","88","13","81","32","14","76","36","408","29","5","5","14","157","10","4","10","31","22","3","14","5","42","70","129","71","163","405","89","340","59","74","318","900","217","482","85","87","191","104","150","122","76","148","552","231","316","499","545","186","139","285","289","216","312","76","46","44","211","974","58","70","160","870","114","99","295","2942","394","130","68","172","67","295","88","189","136","177","258","124","156","107","196"]}}}',
        
        '{"code":200,"source":{"data":{"value":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]}}}',
        
        '{"code":200,"source":{"data":{"value":["0","1","26107","0","0","0","0","0","0","1","1","0","0","1","0","0","0","3","0","0","0","4","4","0","0","3","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","4","0","0","1","0","0","0","0","0","0","0","0","1","0","0","0","0","1","21987","23125","23215","23010","22818","23244","23019","23029","23112","23077","23049","22317","22793","23050","22830","22667","21351","17796","0","0","2","0","0","2","0","234","121","54","8","243","188","105","271","302","3961","25490","24911","21028","21316","16365","9359","11740","10894","8875","8778","23435","23640","22751","22787","21705","22310","20983","20869","18988","6846","21504","23157","21872","22629","21426","19649","20771","18828","18549","15442","12779","227","346","413","62","402","391","320","132","92","1037","0","16","515","603","23","166","1","3","216","240","291","161","184","194","1","64","158","145","210","1","17","21","48","155","81","200","4","192","557","782","503","481","365","431","349","242","353","116","241","26","108","261","101"]}}}',
        
        '{"code":200,"source":{"data":{"value":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]}}}',
        
        '{"code":200,"source":{"data":{"value":["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","1","0","0","0","0","0","0","0","0","0","0","0","0","4","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","2"]}}}'
    ];


angular.module('JBATestApp', ['n3-line-chart'])
.controller('JbaTestCtrl', function($scope, $locale) {
    var sites = JSON.parse(jsonsites);
    $scope.sites = sites.source.rows;
    $scope.selected = $scope.sites[0];
    
    $scope.sitechange = function(){
        //alert($scope.selected.id);
    };
    
    function arr2chartdata(arr) {
        var data = [];
        angular.forEach(arr, function(val, key){
            this.push({x: key, y:val|0});
        }, data);
        return data;
    }
    
    $scope.data = {
        dataset0 : arr2chartdata(JSON.parse(jsondatas[0]).source.data.value)
    };
    //$scope.data = JSON.parse(jsondatas[0]).source.data.value;
    
    $scope.options = {
        series: [
            {
              axis: "y",
              dataset: "dataset0",
              key: "x",
              label: "A line series",
              color: "hsla(88, 48%, 48%, 1)",
              type: ["line"],
              id: "mySeries0"
            }
        ],
        axes: {x: {key: "x"}}
    };
});
